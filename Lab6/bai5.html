<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
</head>
<body ng-app="my_app">
    <div class="container">
        <div class="row">
            <div class="col" ng-controller="bai5Controller">
                <form action="" method="post" name="form5">
                    <div class="card" style="width: auto;">
                        <div class="card-header text-uppercase">
                            custom valadation
                        </div>
                        <div class="card-body">
                            <div class="form-group mb-3">
                                <label for="">Số Poly</label>
                                <input required 
                                        ng-model="polynumber"
                                        poly-number
                                        type="number" 
                                        class="form-control" 
                                        aria-describedby="numberinput" name="numberinput" id="numberinput">
                                <small ng-show="form5.numberinput.$invalid" id="numberinput" class="text-danger">Số này không chia hết cho 2 và 9</small>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-primary">Kiểm tra</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- script -->
    <script src="./js/angular.min.js"></script>
    <script>
        var app = angular.module('my_app', []);
        app.controller('bai5Controller', function($scope){
            
        })
        app.directive('polyNumber', function(){
            return {
                require: 'ngModel',
                link: function(scope, element, attr, mCtrl){
                    mCtrl.$parsers.push(function(value){
                        var num = parseFloat(value);
                        if(num % 2 == 0 && num % 9 == 0){
                            mCtrl.$setValidity('charE', true);
                        } else {
                            mCtrl.$setValidity('charE', false);
                        }
                        return value;
                    })
                    
                }
            }
        })
    </script>
</body>
</html>